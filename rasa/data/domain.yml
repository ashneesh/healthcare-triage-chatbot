version: "3.1"

intents:
  - greet
  - goodbye
  - affirm
  - deny
  - report_symptoms
  - book_appointment
  - cancel_appointment
  - get_health_advice
  - ask_emergency
  - talk_to_human
  - provide_name
  - provide_email
  - get_address
  - handover_to_nurse

entities:
  - patient_name
  - patient_email
  - symptom
  - body_part
forms:
  patient_form:
    required_slots:
      - patient_name
      - patient_email
      - symptoms

# slots:
#   patient_name:
#     type: text
#     influence_conversation: true
#     mappings:
#       - type: from_entity
#         entity: patient_name

#   patient_email:
#     type: text
#     influence_conversation: true
#     mappings:
#       - type: from_entity
#         entity: patient_email

#   symptoms:
#     type: list
#     influence_conversation: true
#     mappings:
#       - type: from_entity
#         entity: symptom
#       - type: from_text
#         conditions:
#           - active_loop: null
#             requested_slot: symptoms
slots:
  symptoms:
    type: list
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: symptom
      - type: from_text
        conditions:
          - active_loop: patient_form
            requested_slot: symptoms

  patient_name:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: patient_name
      - type: from_text
        conditions:
          - active_loop: patient_form
            requested_slot: patient_name

  patient_email:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: patient_email
      - type: from_text
        conditions:
          - active_loop: patient_form
            requested_slot: patient_email

  urgency_level:
    type: text
    influence_conversation: true
    mappings:
      - type: custom

responses:
  utter_greet:
    - text: "Hello! I'm your healthcare assistant. How can I help you today?"

  utter_goodbye:
    - text: "Take care! If you need anything else, I'm here to help."

  utter_ask_symptoms:
    - text: "What symptoms are you experiencing? Please describe them in detail."

  utter_ask_patient_name:
    - text: "May I have your name please?"

  utter_ask_patient_email:
    - text: "What's your email address so we can send you confirmation?"

  utter_ask_appointment_id:
    - text: "Please provide your appointment ID or the email address used for booking."

  utter_appointment_cancelled:
    - text: "Your appointment has been successfully cancelled. You will receive a confirmation email shortly."

  utter_appointment_not_found:
    - text: " I couldn't find an appointment with those details. Please check your appointment ID or email address and try again."

  utter_emergency_warning:
    - text: " This sounds like a medical emergency. Please call 911 immediately!"

  utter_handover_message:
    - text: "Connecting you to a nurse now."

  utter_address:
    - text: "Our hospital is located at 123 Main street, Berlin. You can reach us by U-Bahn line U7."

  utter_default:
    - text: "I'm sorry, I didn't understand that. I can help you with reporting symptoms, booking appointments, or providing health advice. What would you like to do?"

actions:
  - action_assess_symptoms
  - action_book_appointment
  - action_cancel_appointment
  - action_provide_health_advice
  - action_handover_to_human
  - action_default_fallback
  - action_get_performance_metrics
  - validate_patient_form

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
